<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() {
    // Tab switching
    $('#email-tab').click(function() {
        $('#email-tab').addClass('border-primary text-primary').removeClass('border-transparent text-gray-500');
        $('#mobile-tab').removeClass('border-primary text-primary').addClass('border-transparent text-gray-500');
        $('#email-form').removeClass('hidden');
        $('#mobile-form').addClass('hidden');
        $('#otp-form').addClass('hidden');
    });

    $('#mobile-tab').click(function() {
        $('#mobile-tab').addClass('border-primary text-primary').removeClass('border-transparent text-gray-500');
        $('#email-tab').removeClass('border-primary text-primary').addClass('border-transparent text-gray-500');
        $('#mobile-form').removeClass('hidden');
        $('#email-form').addClass('hidden');
        $('#otp-form').addClass('hidden');
    });

            // Handle mobile login form submission
            $('#mobile-form').submit(function(e) {
                e.preventDefault();
                const formData = new FormData(this);

                $.ajax({
                    url: $(this).attr('action'),
                    method: 'POST',
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function(response) {
                        $('#mobile-form').addClass('hidden');
                        $('#otp-form').removeClass('hidden');
                        $('#otp-mobile').text($('input[name=mobile]').val());
                    },
                    error: function(xhr) {
                        alert(xhr.responseJSON?.message || 'Failed to send OTP');
                    }
                });
            });

            // Handle OTP verification
            $('#verify-otp').click(function() {
                const otp = $('#otp-code').val();
                const mobile = $('input[name=mobile]').val();

                $.ajax({
                    url: 'http://localhost:8000/otp/verify',
                    method: 'POST',
                    data: {
                        mobile: mobile,
                        otp: otp,
                        _token: 'pgwexCEGTK5zDGYlY5dbpE0JJ4YVoLLsIctRDk36'
                    },
                    success: function(response) {
                        window.location.href = response.redirect;
                    },
                    error: function(xhr) {
                        alert(xhr.responseJSON?.error || 'Invalid OTP');
                    }
                });
            });

            // Handle resend OTP
            $('#resend-otp').click(function() {
                const mobile = $('input[name=mobile]').val();

                $.ajax({
                    url: 'http://localhost:8000/otp/send',
                    method: 'POST',
                    data: {
                        mobile: mobile,
                        _token: 'pgwexCEGTK5zDGYlY5dbpE0JJ4YVoLLsIctRDk36'
                    },
                    success: function(response) {
                        alert('OTP resent successfully');
                    },
                    error: function(xhr) {
                        alert(xhr.responseJSON?.error || 'Failed to resend OTP');
                    }
                });
            });
        });
</script>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Agrobrix</title>
    <link rel="preload" as="style" href="http://localhost:8000/build/assets/app-CQv_Ayw0.css" /><link rel="stylesheet" href="http://localhost:8000/build/assets/app-CQv_Ayw0.css" />    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        .text-primary {
            color: #059669;
        }
        .bg-primary {
            background-color: #10b981;
        }
        .bg-primary-dark {
            background-color: #059669;
        }
        .border-primary {
            border-color: #10b981;
        }
    </style>
</head>
<body>
    <nav class="bg-white shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
            <div class="flex items-center">
                <div class="flex-shrink-0">
                    <a href="http://localhost:8000" class="text-2xl font-bold gradient-bg bg-clip-text text-transparent">Agrobrix</a>
                </div>
            </div>
            <div class="flex items-center">
                <a href="http://localhost:8000" class="text-gray-700 hover:text-primary font-medium transition">Back to Home</a>
            </div>
        </div>
    </div>
</nav>    <!-- Success Alert -->

<!-- Error Alert -->

<!-- Warning Alert -->

<!-- Info Alert -->

<script>
function closeAlert(alertId) {
    const alert = document.getElementById(alertId);
    if (alert) {
        alert.style.transform = 'translateX(100%)';
        alert.style.opacity = '0';
        setTimeout(() => {
            alert.style.display = 'none';
        }, 300);
    }
}

// Auto-hide alerts after 5 seconds
document.addEventListener('DOMContentLoaded', function() {
    const alerts = ['success-alert', 'error-alert', 'warning-alert', 'info-alert'];
    alerts.forEach(alertId => {
        const alert = document.getElementById(alertId);
        if (alert) {
            setTimeout(() => {
                closeAlert(alertId);
            }, 5000);
        }
    });
});
</script>
    <div class="min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-md w-full space-y-8">
            <div class="bg-white py-8 px-6 shadow-xl rounded-lg sm:px-10">
    <div class="mb-8">
        <h2 class="text-center text-3xl font-extrabold text-gray-900">Sign in to your account</h2>
        <p class="mt-2 text-center text-sm text-gray-600">
            Welcome back to <span class="font-semibold text-primary">Agrobrix</span>
        </p>
                    </div>

    <!-- Login Type Tabs -->
    <div class="flex mb-6 border-b border-gray-200">
        <button id="email-tab" class="flex-1 py-2 px-4 text-center border-b-2 border-primary text-primary font-medium transition">Email</button>
        <button id="mobile-tab" class="flex-1 py-2 px-4 text-center border-b-2 border-transparent text-gray-500 hover:text-gray-700 transition">Mobile</button>
    </div>

    <!-- Email Login Form -->
    <form id="email-form" action="http://localhost:8000/login" method="POST" class="login-form grid grid-cols-1 md:grid-cols-2 gap-6">
        <input type="hidden" name="_token" value="pgwexCEGTK5zDGYlY5dbpE0JJ4YVoLLsIctRDk36" autocomplete="off">        <input type="hidden" name="login_type" value="email">
        <div>
            <label for="email" class="block text-sm font-medium text-gray-700">Email address</label>
            <input id="email" name="email" type="email" autocomplete="email" required
                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary">
        </div>
        <div>
            <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
            <input id="password" name="password" type="password" autocomplete="current-password" required
                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary">
        </div>
        <div class="col-span-1 md:col-span-2">
            <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition">
                Sign in
            </button>
        </div>
    </form>

    <div class="mt-4 text-center">
        <a href="http://localhost:8000/forgot-password" class="text-sm text-primary hover:text-primary-dark">Forgot your password?</a>
    </div>

    <!-- Mobile Login Form -->
    <form id="mobile-form" action="http://localhost:8000/login" method="POST" class="login-form hidden grid grid-cols-1 md:grid-cols-2 gap-6">
        <input type="hidden" name="_token" value="pgwexCEGTK5zDGYlY5dbpE0JJ4YVoLLsIctRDk36" autocomplete="off">        <input type="hidden" name="login_type" value="mobile">
        <div>
            <label for="mobile" class="block text-sm font-medium text-gray-700">Mobile Number</label>
            <input id="mobile" name="mobile" type="text" placeholder="+1234567890" required
                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary">
        </div>
        <div class="col-span-1 md:col-span-2">
            <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition">
                Send OTP
            </button>
        </div>
    </form>

    <!-- OTP Verification Form (shown after mobile login) -->
    <div id="otp-form" class="hidden grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="col-span-1 md:col-span-2 text-center">
            <h3 class="text-lg font-medium text-gray-900">Enter OTP</h3>
            <p class="mt-1 text-sm text-gray-600">OTP sent to <span id="otp-mobile" class="font-medium"></span></p>
        </div>
        <div>
            <label for="otp-code" class="block text-sm font-medium text-gray-700">OTP Code</label>
            <input id="otp-code" type="text" maxlength="6"
                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-center text-2xl tracking-widest focus:outline-none focus:ring-primary focus:border-primary" required>
        </div>
        <div class="col-span-1 md:col-span-2 space-y-3">
            <button id="verify-otp" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition">
                Verify OTP
            </button>
            <button id="resend-otp" class="w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition">
                Resend OTP
            </button>
        </div>
    </div>

    <div class="mt-6 text-center">
        <p class="text-sm text-gray-600">
            Don't have an account?
            <a href="http://localhost:8000/register" class="font-medium text-primary hover:text-primary-dark transition">
                Sign up
            </a>
        </p>
    </div>
</div>
        </div>
    </div>
</body>
</html>